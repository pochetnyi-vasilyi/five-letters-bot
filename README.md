# Five Letters Bot

Телеграм-бот для помощи в игре "Пять букв" (русский аналог Wordle). Бот помогает находить слова по заданным критериям: обязательные и исключённые буквы, известные и исключённые позиции.

## Возможности

- Поиск слов из словаря русских слов (5 букв)
- Фильтрация по обязательным буквам (жёлтые + зелёные в игре)
- Фильтрация по исключённым буквам (серые в игре)
- Указание точных позиций букв (зелёные)
- Указание позиций, где буква точно не стоит (жёлтые)
- Валидация ввода с подсказками об ошибках
- Логирование действий пользователей

## Требования

- Python 3.12+
- Docker (опционально)

## Установка и запуск

### Вариант 1: Локальный запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/your-username/five-letters-bot.git
cd five-letters-bot
```

2. Создайте виртуальное окружение и активируйте его:
```bash
# Linux/macOS
python3 -m venv venv
source venv/bin/activate

# Windows
python -m venv venv
venv\Scripts\activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` с токеном бота:
```bash
TELEGRAM_BOT_TOKEN=ваш_токен_от_botfather
LOG_DIR=./logs
```

5. Запустите бота:
```bash
python bot.py
```

### Вариант 2: Запуск в Docker

1. Создайте файл `.env` с токеном бота:
```bash
TELEGRAM_BOT_TOKEN=ваш_токен_от_botfather
LOG_DIR=/app/logs
```

2. Соберите и запустите контейнер:
```bash
docker build -t five-letters-bot .
docker run -d --name five-letters-bot --env-file .env -v five-letters-logs:/app/logs five-letters-bot
```

Или используйте готовый скрипт для пересборки (Linux/macOS):
```bash
./rebuild.sh
```

### Получение токена бота

1. Откройте [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен в файл `.env`

## Использование бота

1. Найдите вашего бота в Telegram и нажмите `/start`
2. Введите обязательные буквы (которые есть в слове) или `-` если их нет
3. Введите исключённые буквы (которых точно нет в слове) или `-`
4. Укажите известные позиции букв в формате `1а 3р` или `-`
5. Укажите исключённые позиции в формате `2ае 4т` или `-`
6. Получите список подходящих слов

### Команды бота

|  Команда  |        Описание        |
|-----------|------------------------|
| `/start`  | Начать новый поиск     |
| `/help`   | Показать справку       |
| `/cancel` | Отменить текущий поиск |

### Формат ввода позиций

- `3р` — на 3-й позиции буква "р"
- `1а 3р 5т` — несколько известных позиций
- `2ае` — на 2-й позиции НЕ буквы "а" и "е" (для исключённых позиций)

## Структура проекта

```
five-letters-bot/
├── bot.py              # Основной код бота
├── rus.txt             # Словарь русских слов из 5 букв
├── clear_main_rus.py   # Утилита для поиска слов (CLI)
├── requirements.txt    # Зависимости Python
├── Dockerfile          # Конфигурация Docker
├── rebuild.sh          # Скрипт пересборки Docker-контейнера
└── .env                # Переменные окружения (не в репозитории)
```

## Логирование

Бот записывает действия пользователей в файл `user_actions.log`. Путь к директории логов можно настроить через переменную `LOG_DIR` в `.env`.
